import matplotlib.pyplot as plt

stride = [1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768, 65536]
stride_str = ['1', '2', '4', '8', '16', '32', '64', '128', '256', '512', '1K', '2K', '4K', '8K', '16K', '32K', '64K']

array_size = [9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28]

stride1_cycles = [9.433120, 9.376280, 10.671300, 9.891060, 8.472290, 9.221780, 9.407920, 8.710440, 9.189470, 8.460760, 8.489000, 8.479300, 8.736610, 10.269660, 8.603700, 8.818350, 8.541760, 8.782740, 8.627230, 9.029210]
stride2_cycles = [8.400120, 13.277550, 37.312670, 11.731800, 10.596940, 8.652970, 9.091850, 8.609640, 8.981090, 8.463650, 13.448290, 23.704180, 11.457760, 9.244650, 9.814320, 11.061820, 8.888090, 8.780770, 8.499730, 8.881880]
stride4_cycles = [8.405320, 17.756520, 11.457380, 14.893530, 8.990270, 10.915580, 12.758560,11.100820, 9.833970, 9.940910, 9.980530, 11.385260, 9.773380, 36.775470, 21.717730, 25.195770, 11.072380, 13.035300, 9.744540, 10.419730]
stride8_cycles = [8.717290, 9.222240, 8.911030, 9.170120, 9.201230, 9.311320, 12.036650, 16.115560, 14.971890, 49.552780, 28.231010, 18.294210, 61.064020, 17.378650, 18.607760, 41.123610, 20.254470, 19.076560, 18.312090, 17.960580]
stride16_cycles = [20.993260, 13.206090, 8.856350, 8.788210, 9.173000, 9.107100, 13.236470, 14.006240, 13.962120, 14.168560, 17.410440, 77.031530, 136.261650, 157.966920, 128.184750, 97.570220, 48.313440, 43.350090, 42.832060, 44.039120]
stride32_cycles = [8.997120, 8.906380, 8.919730, 16.061720, 11.290520, 9.008680, 11.914210, 18.297000, 13.424880, 19.616880, 189.704230, 38.304260, 172.891290, 160.869050, 204.299110, 195.199480, 152.630340, 88.340240, 87.731640, 90.797380]
stride64_cycles =[9.694030, 8.581330, 8.953090, 9.163740, 9.013590, 9.459880, 11.711440, 16.966900, 13.907440, 17.055470, 26.172620, 90.948160, 111.307660, 68.460640, 136.271020, 153.748090, 124.408800, 126.432730, 117.331090, 115.938820]
stride128_cycles = [8.473320, 8.724030, 8.704330, 8.749940, 8.693560, 8.687440, 10.462770, 13.566440, 13.555230, 16.416060, 65.809080, 74.131750, 125.839190, 148.516470, 109.741680, 186.780740, 155.156150, 137.755300, 129.963970, 130.288000]
stride256_cycles = [10.010730, 11.989120, 8.985890, 9.855270, 9.886230, 10.188350, 13.581360, 21.316150, 15.152830, 22.804920, 80.388910, 67.111310, 63.558470, 228.799540, 265.901730, 279.973170, 200.920440, 188.256730, 183.001470, 194.884510]
stride512_cycles = [8.441350, 12.225950, 8.835380, 8.771410, 8.789440, 8.697090, 9.429500, 16.945850, 17.641790, 20.623890, 85.285570, 82.220510, 61.325560, 146.934530, 234.968100, 258.517680, 283.449040, 228.027590, 227.357700, 236.173710]
stride1k_cycles = [8.786000, 12.046280, 8.905880, 9.642010, 8.767500, 9.387670, 8.624850, 9.053880, 15.837470, 22.035040, 47.855940, 61.858670, 48.556680, 130.881970, 159.323020, 188.296440, 249.542630, 259.269880, 241.419470, 242.406090]
stride2k_cycles = [8.431620, 11.293140, 12.496440, 9.110180, 9.197290, 8.710420, 8.671380, 8.652350, 9.729810, 21.968880, 46.589290, 50.370400, 74.048700, 62.556860, 156.064850, 256.222440, 247.185940, 265.872470, 241.547510, 240.576120]
stride4k_cycles = [8.394240, 9.774220, 9.126440, 8.854470, 8.683060, 9.120090, 24.351630, 9.279130, 9.080380, 11.414700, 41.983720, 39.158260, 57.096020, 56.960850, 76.778410, 107.999430, 239.802710, 321.700780, 267.300680, 274.780530]
stride8k_cycles = [8.692180, 9.683950, 8.757910, 8.395240, 8.606710, 8.397120, 8.427760, 8.605060, 8.431910, 11.563910, 16.571350, 50.056480, 39.490230, 51.004420, 82.845620, 89.437240, 94.238780, 265.781650, 258.740910, 312.101620]
stride16k_cycles = [8.446710, 8.608650, 9.009760, 8.994690, 9.272910, 9.380660, 10.066670, 10.583400, 10.625560, 11.240400, 9.099320, 19.101540, 21.320470, 31.764090, 61.916830, 65.999920, 66.478920, 82.319420, 224.969030, 383.913680]
stride32k_cycles = [8.779060, 10.248400, 11.889670, 9.692400, 8.995960, 8.602000, 8.436410, 9.013460, 9.390060, 10.339550, 10.072680, 10.142800, 25.134300, 28.266470, 35.188410, 41.314500, 90.591210, 125.705340, 92.423170, 425.997000]
stride64k_cycles = [8.401560, 8.904740, 10.969670, 8.789470, 8.822650, 9.109680, 8.651670, 8.840940, 11.324590, 10.581840, 8.921710, 10.569170, 8.687640, 15.251260, 30.902470, 30.217710, 33.658760, 59.144440, 73.195920, 160.299620]

plt.plot(array_size, stride1_cycles)
plt.plot(array_size, stride2_cycles)
plt.plot(array_size, stride4_cycles)
plt.plot(array_size, stride8_cycles)
plt.plot(array_size, stride16_cycles)
plt.plot(array_size, stride32_cycles)
plt.plot(array_size, stride64_cycles)
plt.plot(array_size, stride128_cycles)
plt.plot(array_size, stride256_cycles)
plt.plot(array_size, stride512_cycles)
plt.plot(array_size, stride1k_cycles)
plt.plot(array_size, stride2k_cycles)
plt.plot(array_size, stride4k_cycles)
plt.plot(array_size, stride8k_cycles)
plt.plot(array_size, stride16k_cycles)
plt.plot(array_size, stride32k_cycles)
plt.plot(array_size, stride64k_cycles)

plt.title("Memory latency measurement (Windows 10)", fontsize=15)
plt.xlabel("Array size (log2)", fontsize=15)
plt.ylabel("Cycles", fontsize=15)

plt.tick_params(axis="both", which="major", labelsize=13)
plt.tick_params(axis="both", which="minor", labelsize=13)

plt.legend(['stride 1', 'stride 2','stride 4','stride 8','stride 16','stride 32','stride 64','stride 128','stride 256','stride 512','stride 1K','stride 2K','stride 4K','stride 8K','stride 16K','stride 32K','stride 64K'], loc='upper left')

plt.show()
